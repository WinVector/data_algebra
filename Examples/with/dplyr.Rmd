---
title: "sql_example"
output: github_document
---

Just a peak at what `dbplyr` generated `SQL` looks like.

```{r}
library(dplyr)
library(dbplyr)
library(DBI)

connection <- DBI::dbConnect(RSQLite::SQLite(), ":memory:")
```

```{r}
d = data.frame(
  x = c(1, 2, 3)
)

d_db = copy_to(connection, d)
```


```{r}
ops <- d_db %>%
  mutate(z = x + 1) %>%
  mutate(q = x + 3) %>%
  mutate(h = x + 6)

ops %>% show_query()
```

```{r}
ops <- d_db %>%
  mutate(z = x + 1) %>%
  mutate(q = z + 2) %>%
  mutate(h = q + 3)

ops %>% show_query()
```



```{r}
dbDisconnect(connection)
```


